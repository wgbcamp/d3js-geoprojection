import*as m from"https://cdn.jsdelivr.net/npm/d3@7/+esm";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const d of a.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function e(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(r){if(r.ep)return;r.ep=!0;const a=e(r);fetch(r.href,a)}})();const u=800,h=1400,f=m.create("svg").attr("width",h).attr("height",u),v=m.geoEqualEarth(),p=m.geoPath().projection(v),y="custom.geo.json";var n,i,s=[],g=[{name:"GRA",color:"rgb(255, 255,255)"},{name:"PRGT",color:"rgb(183, 47, 49)"},{name:"RST",color:"rgb(76, 123, 58)"}];const w=async()=>{var c=await fetch(`/data/${y}`);n=await c.json();var t=await fetch("/data/output.json");i=await t.json();for(var e=0;e<n.features.length;e++){for(var o=0;o<i.length;o++)if(n.features[e].properties.admin==i[o].Member){s.push({coordinates:p.centroid(n.features[e]),name:n.features[e].properties.admin,flag:`/assets/flags/${n.features[e].properties.admin.replace(" ","_").toLowerCase()}.png`}),console.log(n.features[e].properties.admin.replace(" ","_").toLowerCase());break}e==n.features.length-1&&console.log(s)}console.log(n),f.selectAll("path").data(n.features).join("path").attr("d",p).attr("fill","rgba(72, 153, 210, 1)").attr("stroke","rgba(72, 153, 210, 1)")};w();var l=1952;setInterval(()=>{if(l<=2025){var c;c=document.querySelectorAll(".flagImage");for(var t=0;t<c.length;t++)c[t].remove();for(var t=0;t<i.length;t++)if(i[t].Year==l){console.log(i[t]);for(var e=0;e<s.length;e++)if(i[t].Member==s[e].name){for(var o=0;o<g.length;o++)g[o].name==i[t].Type&&f.append("rect").attr("x",s[e].coordinates[0]-10.5).attr("y",s[e].coordinates[1]-8).attr("width",21).attr("height",16).attr("fill",g[o].color).attr("class","flagImage");f.append("image").attr("href",s[e].flag).attr("x",s[e].coordinates[0]-10).attr("y",s[e].coordinates[1]-7.5).attr("width",20).attr("height",15).attr("id",s[e].name).attr("class","flagImage")}}l++}},3e3,l);map.append(f.node());
